# 1. 다양한 보조기억장치

🥳 핵심 키워드

- 하드 디스크
- 플래터
- 데이터 접근 시간
- 플래시 메모리
- 페이지 블록

## 하드 디스크

- 자기적인 성질 → 자기 디스크(magnetic disk)의 일종
- 플래터: 실질적 데이터 저장되는 곳
- 스핀들: 플래터를 회전시키는 요소
  - 분당 회전수(RPM): 스핀들이 플래터를 회전시키는 속도
- 헤드: 플래터를 대상으로 데이터를 읽고 쓰는 요소
- 디스크 암: 헤드를 원하는 위치로 이동

- 플래터: `트랙`, `섹터`라는 단위로 데이터 저장
- **트랙**: 플래터를 여러 동심원으로 나누었을 때 하나의 원
- **섹터**: 트랙을 피자처럼 여러 조각으로 나누었을 때 하나의 조각
- **실린더**: 여려 겹의 플래터 상에서 같은 트랙이 위치한 곳을 모아 연결한 논리적 단위
- 연속된 정보는 한 실린더에 저장한다. 디스크암을 이동하지 않고도 바로 데이터에 접근할 수 있기 때문
- 하드 디스크가 저장된 데이터에 접근하는 시간: **탐색 시간, 회전 지연, 전송 시간**
  - 탐색 시간: 데이터가 저장된 트랙까지 **헤드를** 이동시키는 시간
  - 회전 지연: 헤드가 있는 곳까지 **플래터를** 회전시키는 시간
  - 전송 시간: 하드 디스크와 컴퓨터 간에 **데이터를** 전송하는 시간
- 구글의 AI를 주도하는 제프 딘이 공개한 “프로그래머가 꼭 알아야 할 컴퓨터 시간들”
  ![](./asset/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-08-23%20%EC%98%A4%ED%9B%84%202.12.00.png)
- 다중 헤드 디스크: 트랙마다 헤드가 있어 탐색 시간이 들지 않는다(탐색 시간: 0), 헤드 움직일 필요 없으므로 고정 헤드 디스크라고도 함.

## 플래시 메모리

![](./asset/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-08-23%20%EC%98%A4%ED%9B%84%202.14.18.png)

- 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치
- 보조기억장치 범주에만 속하기보다는 다양한 곳에서 널리 사용됨.
- 거의 모든 전자제품 내 플래시 메모리 내장
- NAND, NOR 플래시 메모리가 있으나 대용량 저장 장치로 많이 사용되는 플래시 메모리: NAND 임.

`셀`: 플래시 메모리에서 데이터를 저장하는 가장 작은 단위

- 모이고 모여 MB, GB, TB 용량
- 한 셀에 몇 비트를 저장할 수 있느냐에 따라 플래시 메모리 종류 다름
  - **SLC**(Single Level Cell): 한 셀에 1bit 저장
  - **MLC**(Multiple Level Cell): 한 셀에 2bit 저장
  - **TLC**(Triple Level Cell): 한 셀에 3bit 저장
- 이는 플래시 메모리의 수명, 속도, 가격에 큰 영향.

### SLC 타입

- MLC, TLC에 비해 빠른 입출력
- 용량 대비 가격이 높음.
- 기업에서 데이터의 읽고 쓰기가 매우 많이 반복, 고성능의 빠른 장치를 원할때 사용

### MLC 타입

- 하나의 셀로 4개의 정보 표현 가능
- SLC타입보다 일반적으로 속도와 수명 떨어지지만, 대용량에 유리
- MLC타입은 SLC보다 용량 대비 가격 낮음.
- 시중에서의 많은 플래시 메모리는 MLC(or TLC)임

### TLC 타입

- 하나의 셀로 8개의 정보 표현 가능
- 대용량 유리
- SLC, MLC보다 속도, 수명 떨어지지만 대용량에 유리
- 가격 저렴.

플래시 메모리의 가장 작은 단위인 셀보다 더 큰 단위를 알아보자.

- **페이지**: 셀들이 모여 만들어진 단위
- **블록**: 페이지가 모여 만들어진 단위
- **플레인**: 블록이 모여 만들어진 단위
- **다이**: 플레인이 모여 만들어진 단위

- 플래시 메모리 읽기/쓰기 → **페이지** 단위
- 플래시 메모리 삭제 → **블록** 단위

플래시 메모리의 가장 큰 특징: **읽기/쓰기**와 **삭제**에서의 **단위**가 다르다!

이때 **페이지** 상태는 3개.

- **Free**: 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
- **Valid**: 유효한 데이터를 저장하고 있는 상태
- **Invalid**: 쓰레기값, 유효하지 않은 데이터를 저장하고 있는 상태

이때 플래시 메모리는 하.디와 달리 덮여쓰기가 안된다. 따라서 쓰레기값을 정리하기 위한 **가비지 컬렉션** 기능 제공

- 가비지 컬렉션: 유효한 페이지들만 새로운 **블록**으로 복사 후 기존 블록 삭제해 공간 정리

# 2. RAID의 정의와 종류

## RAID 정의

- Redundant Array of Independent Disks
- 주로 하.디와 SSD를 사용
- 데이터의 안전성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술.

## RAID 종류

- RAID 구성방법에 따른 종류

### RAID 0

여러개의 보조기억장치에 데이터를 단순히 나눠 저장

![](./asset/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-08-23%20%EC%98%A4%ED%9B%84%202.31.20.png)
데이터를 저장할 때 각 하드디스크는 아래와 같이 번갈아 가며 데이터 저장

즉, **저장되는 데이터가 하드디스크 수** 만큼 나뉘어 저장

→ 줄무늬 처럼 분산되어 저장된 데이터: stripe(분산해 저장하는 것: striping)

스트라이핑되면 저장된 데이터를 읽고 쓰는 속도가 빨라짐.

- 하나의 대용량 저장 장치에 저장했다면 여러번에 걸쳐 읽고 썼을 데이터를 **동시에** 읽고 쓸 수 있기 때문

그러나 RAID0은 **저장된 정보가 안전하지 않다**는 단점.

RAID 0으로 구성된 하드디스크 중 하나에 문제 발생 → 다른 모든 하드디스크의 정보를 읽는 데 문제 발생.

![](./asset/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-08-23%20%EC%98%A4%ED%9B%84%202.34.44.png)

### RAID 1

- 복사본을 만드는 방식
- 거울처럼 복사본을 만들어서 **미러링**이라고도 함.

![](./asset/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-08-23%20%EC%98%A4%ED%9B%84%202.36.16.png)

- RAID0처럼 데이터 스트라이핑이 사용되긴 했지만 오른쪽 하.디는 마치 거울처럼 왼쪽의 두 하.디와 동일한 내용 가짐
- RAID1에 어떠한 데이터를 쓸 때는 **원본, 복사본** 두 군데에 씀
  - 쓰기 속도는 RAID0 보다 느림
- 복구가 매우 간단하다는 장점
- 하.디의 개수가 한정되었을때 사용 가능한 용량이 적어지는 단점

### RAID 4

- RAID1 처럼 완전 복사본을 만드는 대신 **오류를 검출하고 복구하기 위한 정보 저장하는** 장치를 두는 구성 방식.
  - **패리티 비트**: 다른 장치들의 오류 검출, 복구
- 패리티를 저장한 장치 이용해 적은 하.디로도 데이터를 안전하게 보관 가능

### RAID 5

- RAID4에서는 어떤 새로운 데이터가 저장될때마다 패리티를 저장하는 디스크에도 데이터를 씀 → **패리티를 저장하는 장치**에 `병목현상` 발생.
- **패리티**를 분산해 저장 → 병목현상 해소.

### RAID 6

- 기본적으로 RAID5와 같되, **서로 다른 2개의 패리티**를 둠.
- 새로운 정보를 저장할 때마다 함께 저장할 패리티가 2개이므로 쓰기 속도는 RAID5보다 느림.
- RAID6은 데이터 저장 속도 희생, 데이터를 더욱 안전하게 보관.
