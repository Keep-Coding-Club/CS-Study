## 장치 컨트롤러

- 입출력 장치가 다루기 까다로운 이유
    1. 종류가 너무 많음
    2. 일반적으로 데이터 전송률이 CPU와 메모리에 비해 낮음
- 입출력 제어기, 입출력 모듈이라고도 불림
- 입출력 장치와 컴퓨터 내부가 정보를 주고받도록 도와주는 장치
- 하는 일
    - CPU와 입출력장치 간의 통신 중개
    - 오류 검출
    - 데이터 버퍼링
        - 전송률이 낮은 장치와 높은 장치 사이에 주고받은 데이터를 버퍼에 저장하여 전송률을 비슷하게 맞추는 방법

## 장치 컨트롤러 내부

- 데이터 레지스터
    - CPU와 입출력장치 사이에 주고받을 데이터가 담기는 레지스터
    - 최근에는 레지스터 대신 RAM을 사용하기도 함
- 상태 레지스터
    - 입출력장치의 상태 정보 저장
- 제어 레지스터
    - 입출력장치가 수행할 내용에 대한 제어 정보와 명령을 저장

## 장치 드라이버

- 장치 컨트롤러의 동작을 감지하고 제어함으로써 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 프로그램
- 입출력 장치를 연결하기 위한 소프트웨어적인 통로
- 장치 드라이버가 설치되어 있지 않다면 해당 입출력 장치를 사용할 수 없음

## 프로그램 입출력

- 프로그램 속 명령어로 입출력장치를 제어하는 방법
- 종류
    - 메모리 맵 입출력
        - 메모리에 접근하기 위한 주소 공간과 입출력장치에 접근하기 위한 주소 공간을 하나의 주소 공간으로 간주하는 방법
        - CPU는 메모리의 주소들이나 장치 컨트롤러의 레지스터들이나 모두 똑같이 메모리 주소를 대하듯 하면 됨
        - 메모리 주소 공간이 축소됨
    - 고립형 입출력
        - 메모리를 위한 주소 공간과 입출력장치를 위한 주소 공간을 분리하는 방법
        - CPU는 입출력장치에 접근하기 위해 메모리에 접근하는 명령어와는 다른 입출력 명령어를 사용
        - 메모리 주소 공간이 축소되지 않음

## 인터럽트 기반 입출력

- 인터럽트를 기반으로 하는 입출력
- 프로그래머블 인터럽트 컨트롤러 (PIC)
    - 우선순위를 반영하여 다중 인터럽트를 처리하는 방법
    - 여러 장치 컨트롤러에 연결되어 장치 컨트롤러에서 보낸 하드웨어 인터럽트 요청들의 우선순위를 판별한 뒤 CPU에 지금 처리해야 할 하드웨어 인터럽트는 무엇인지 알려주는 장치
    - 처리 과정
        1. 장치 컨트롤러에서 인터럽트 요청 신호를 받아들임
        2. 인터럽트 우선순위를 판단한 뒤 CPU에 처리해야 할 인터럽트 요청 신호를 보냄
        3. CPU는 PIC에 인터럽트 확인 신호를 보냄
        4. 데이터 버스를 통해 CPU에 인터럽트 벡터를 보냄
        5. CPU는 인터럽트 벡터를 통해 인터럽트 요청의 주체를 알게 되고, 해당 장치의 인터럽트 서비스 루틴을 실행

## DMA 입출력

- 입출력장치와 메모리가 CPU를 거치지 않고도 상호작용할 수 있는 입출력 방식
- 직접 메모리에 접근할 수 있는 입출력 기능
- 시스템 버스에 DMA 컨트롤러가 필요
- 처리 과정
    1. CPU는 DMA 컨트롤러에 입출력 작업을 명령
    2. CPU 대신 장치 컨트롤러와 상호작용하며 입출력 작업 수행
    3. 입출력 작업이 끝나면 CPU에 인터럽트를 걸어 작업이 끝났음을 알림

## 입출력 버스

- 입출력장치와 컴퓨터 내부를 연결 짓는 통로
- 입출력 작업 과정에서 시스템 버스 사용 횟수를 줄여줌
