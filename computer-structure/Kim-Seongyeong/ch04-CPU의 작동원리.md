# ch04 CPU의 작동 원리

주차: 1일차, 6주차

# 4-1. ALU와 제어장치

## ALU

- ALU
    - CPU 내부 계산을 담당
    - 레지스터를 통해 피연산자를 받아들이고,
        
        제어장치로부터 수행할 연사을 알려주는 제어 신호를 받아들임
        
    - 레지스터와 제어장치로부터 받아들인 피연산자와 제어 신호로 산술 연산, 논리 연산 등 다양한 연산을 수행
    - 연산을 수행한 결과는 특정 숫자나 문자가 될 수도 있고, 메모리 주소가 될 수도 있음
        
        이 결괏값은 일시적으로 레지스터에 저장 
        
    - 플래그: 연산 결과에 대한 추가적인 상태 정보
        
        ex) 부호 플래그, 제로 플래그, 오버플로우 플래그, 인터럽트 플래그 …
        

## 제어장치

- 제어장치
    - 제어 신호를 내보내고, 명령어를 해석하는 부품
- 제어 신호
    - 컴퓨터 부품들을 관리하고 작동시키기 위한 일종의 전기 신호
- 제어장치가 받아들이는 정보
    1. 클럭 신호를 받아들임
    2. 해석해야 할 명령어를 받아들임
    3. 플래그 레지스터 속 플래그 값을 받아들임
    4. 시스템 버스, 그중에서 제어 버스로 전달된 제어 신호를 받아들임
- 제어장치가 CPU 내부에 전달하는 제어 신호
    1. ALU에 전달 
        
        : 수행할 연산 지시를 위해
        
    2. 레지스터에 전달 
        
        : 레지스터 간 데이터 이동을 위함이나 레지스터에 저장된 명령어를 해석하기 위해
        
- 제어장치가 CPU 내부에 전달하는 제어 신호
    1. 메모리에 전달
        
        메모리에 저장된 값을 읽거나 메모리에 새로운 값을 쓰고 싶을 때
        
    2. 입출력 장치에 전달
        
        입출력 장치에 값을 읽거나 새로운 값을 쓰고 싶을 때
        

# 4-2. 레지스터

## 반드시 알아야 할 레지스터

1. **프로그램 카운터(명령어 포인터)**
    
    메모리에서 가져올 명령어의 주소
    
2. **명령어 레지스터**
    
    방금 메모리에서 읽어 들인 명령어를 저장하는 레지스터
    
3. **메모리 주소 레지스터**
    
    메모리 주소를 저장하는 레지스터
    
4. **메모리 버퍼 레지스터**
    
    메모리와 주고받을 값(데이터와 명령어)을 저장하는 레지스터
    
5. 플래그 레지스터
    
    연산 결과 또는 CPU 상태에 대한 부가적인 정보를 저장하는 레지스터
    
6. 범용 레지스터
    
    다양하고 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터
    
7. 스택 포인터
    
    스택 주소 지정 방식에서 사용
    
8. 베이스 레지스터
    
    변위 주소 지정 방식에서 사용
    

## 특정 레지스터를 이용한 주소 지정 방식(1): 스택 주소 지정 방식

- 스택 주소 지정 방식
    - 스택과 스택 포인터를 이용한 주소 지정 방식
    - 스택 포인터는 스택에 마지막으로 저장한 값의 위치를 저장하는 레지스터

## 특정 레지스터를 이용한 주소 지정 방식(2): 변위 주소 지정 방식

- 변위 주소 지정 방식
    - 오퍼랜드 필드의 값과 특정 레지스터의 값을 더하여 유효 주소를 얻어내는 주소 지정 방식
    1. 상대 주소 지정 방식
    2. 베이스 레지스터 주소 지정 방식
        
        베이스 레지스터에 저장된 주소는 기존 주소로서의 역할을 함
        

# 4-3. 명령어 사이클과 인터럽트

## 명령어 사이클

- 명령어 사이클
    - 프로그램 속 각각의 명령어들은 일정한 주기가 반복되며 실행되는 주기

## 인터럽트

- 인터럽트
    - CPU의 작업을 방해하는 신호
- 인터럽트 종류
    - 동기 인터럽트
        - CPU에 의해 발생
        - ‘예외’라 부름
    - 비동기 인터럽트
        - 입출력 장치에 의해 발생
        - ‘하드웨어 인터럽트’라 부름
        - 막을 수 있는 인터럽트와 막을 수 없는 인터럽트 존재

- CPU가 인터럽트 요청을 받아들이면 **인터럽트 서비스 루틴(ISR)** 실행
    
    인터럽트 핸들러라고도 함
    
    CPU는 수많은 인터럽트 서비스 루틴을 구분하기 위해 **인터럽트 벡터** 이용
    
    인터럽트 벡터를 알면 인터럽트 서비스 루틴의 시작 주소를 알 수 있음
    

- 용어
    - 인터럽트 요청 신호
        
        : CPU의 작업을 방해하는 인터럽트에 대한 요청
        
    - 인터럽트 플래그
        
        : 인터럽트 요청 신호를 받아들일지 무시할지를 결정하는 비트
        
    - 인터럽트 벡터
        
        : 인터럽트 서비스 루틴의 시작 주소를 포함하는 인터럽트 서비스 루틴의 식별 정보
        
    - 인터럽트 서비스
        
        : 인터럽트를 처리하는 프로그램