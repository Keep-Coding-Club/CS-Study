# 01. 프로세스 개요 
## 프로세스 
cpu에 의해 실행중인 하나의 프로그램 
- PCB를 가진 프로그램 
- 주기억장치에 저장된 프로그램 
- 프로세서가 할당되는 실체 (디스패치가 가능한 단위)
- 프로시저가 활동중인 것 
- 비동기적 행위를 일으키는 주체
- 지정된 결과를 얻기 위한 일련의 계통적 동작 
- 목적 또는 결과에 따라 발생되는 사건들의 과정 
- 운영체제가 관리하는 실행 단위 
=> 보조기억장치에 저장되어 있는 실행 가능한 프로그램이 메모리에 적재되어 os의 제어를 받는 상태
=> 생성/실행 중에 다양한 자원들을 할당 받음 
## 프로세스의 구성 
프로세스는 프로그램과 달리 주기억장치에 주소 공간을 가지며 현재의 활동 요소를 갖는 능동적인 개체임 
- 프로세서의 레지스터에 의해 표현   
## 프로그램 vs 프로세스 
프로그램 
- 보조기억장치에 저장된 파일 
- 수동적 존재 
프로세스 
- pc와 관걔되는 자원들의 집합을 갖는 능동적 실체 
- 하나의 프로그램이 여러 번 실행된 경우 
	- 각각의 실행은 독립적인 프로세스를 만듦
	- 코드 영역은 같더라도 나머지 영역은 다를 수 있음 
## 프로세스의 종류: 역할에 따라 
시스템 프로세스 (운영체제 프로세스)
- 프로세스들의 실행 순서 제어 
- 한 프로세스가 다른 프로세스 영역을 침범하지 못하게 감시 
- 시스템 운영에 필요한 작업 수행 
	- 사용자/입출력 프로세스의 생성 등 
사용자 프로세스 
- 사용자 코드를 수행 
## 프로세스의 종류: 수행 방법에 따라 
독립 프로세스 
- 다른 프로세스에 영향을 주지도, 받지도 않ㅇ므 
- 데이터도 공유하지 않음 
협동 프로세스 
- 다른 프로세스에 영향을 주거나 받음 
	- 시스템의 자원을 공유하는 프로세스들 
- 상호간에 통신을 위한 수단과 동기화 기능 필요 
# 02. 프로세스 관리 
## 프로세스 관리 
os는 프로세스에 기본적인 서비스를 수행 
## 프로세스의 상태 변화 
![Pasted image 20230830211653](https://github.com/Keep-Coding-Club/CS-Study/assets/87464975/fa982a88-59ba-4ea0-9587-d1891b5ad2b0)
모든 프로세스는 시스템 내에 존재하는 동안 상태가 변함
- os는 프로세서 스케줄러를 이용해 프로세스 상태 변화를 관리
## 프로세스 제어 블록 
process control block, pcb
임의의 프로세스에 대해 완전한 정보를 제정하고 있는 자료구조 
- os에서 각 프로세스는 pcb에 의해 표현 
	- 프로세스 테이블로 각 프로세스에 대한 pcb 유지 
- 프로세스를 관리하기 위해 유지되는 데이터 구조 
	- 프로세스 식별자, 프로세스 상태, 레지스터 정보 등 
- 프로세스 생성시 만들어져서 메인 메모리에 유지 
	- os에서 한 프로세스의 존재를 정의 
- os의 모든 모듈이 읽고 수정 가능 
- = 작업 제어 블록 
# 프로세스 제어 블록의 구성 항목 
프로세스 고유 식별자 
프로세스 현재 상태 
각종 포인터 
- 부모 프로세스 , 자식 프로세스 
- 프로세스가 위치한 메모리, 할당된 자원들 
스케줄링 정보 및 우선순위 
pc 등 cpu 레지스터들의 저장 영역 
주기억장치(BR, page table)정보
입출력장치, 개방된 파일 목록 
계정정보 (cpu 사용시간, 실제 사용시간 등)
## 프로세스 테이블 
OS는 각 프로세스의 pcb를 가리키는 포인터를 시스템 전체 혹은 사용자별 프로세스 테이블에 유지 
pcb에 빠르게 접근 할 수 있도록 함 
프로세스가 종료하면 
- 운영체제는 프로세스의 메모리와 기타 자원을 해제해 다른 프로세스가 사용할 수 있게 함 
- 프로세스 테이블에서 해당 프로세스를 제거 
# 03. 프로세스 스케줄링 
## 프로세스 스케줄링 
프로세스가 실행될 대 필요한 시스템의 자원을 해당 프로세스에게 할당하는 작업을 의미 
- 다중 프로그래밍 시스템의 목적
	- cpu의 이용률을 높이기 위해 
	- 항상 임의의 프로세스를 실행할 수 있도록 함 
- 시분할 시스템의 목적 
	- 사용자 응답성을 높이기 위해 
	- cpu 가 프로세스들 사이를 빠르게 전환하며 수행 
프로세스 스케줄러 (cpu 스케줄러)
- 프로세스들 중에 수행 가능한 한 프로세스를 선택 
## 프로세스 우선 순위 
pcb의 우선 순위값 변경 가능 
프로세스 스케줄러는 준비 큐의 우선 순위를 이용해 프로세스를 스케줄링함 
- 준비 큐의 프로세스는 다음과 같이 구분 
	- 프로세서 중심 프로세스 (낮은 우선 순위, 큰 시간 할당량)
	- 입출력 중심 프로세스 (높은 우선순위, 작은 시간 할당량)
	- io 중심의 프로세스는 짧게 사용
	- 프로세서 중심 프로세스는 한 번에 오래 사용 
## 컨텍스트 전환 
cpu 스케줄링이 일어나 cpu에 할당된 프로세스를 교환하는 작업 
1. 현재 수행을 중단하고 교체될 프로세스의 정보들 (PCB)을 저장 
2. cpu 스케줄러에 의해 새로 시작할 프로세스 선택 
3. 새로 시작할 프로세스의 정보들(PCB)을 적재 
## 프로세스 간에 cpu 전환 
![Pasted image 20230830213307](https://github.com/Keep-Coding-Club/CS-Study/assets/87464975/2d3ea627-3d8c-4346-958d-28990055a0ed)

## 컨텍스트 전환 시간 
시분할 시스템의 어쩔 수 없는 순수한 오버헤드 
- 전환하는 동안에는 어떠한 프로그램도 수행할 수 없음 
하드웨어에 크게 좌우됨 
- 주기억장치의 속도와 관리 기법
- cpu의 레지스터 개수 
- 등등
os가 복잡할 수록 많은 시간 소요
# 04. 프로세스의 생성과 제거 
## 프로세스들의 동작 
시스템 내의 프로세스들은 
- 병행적으로 수행 가능 
- 동적으로 생성, 제거 됨
따라서 운영체제는 
- 프로세스 생성, 종료를 위한 기법을 제공해줘야 함 
## 프로세스 생성 
임의의 프로세스는 시스템 호출을 통해 새로운 프로세스 생성 간으 
- 프로세스 관리를 위한 pcb를 만든 후 프로세스에 메모리 주소 공간 할당 
- os와 사용자 응용 프로그램의 요청에 의해 생성
- 부모-자식 관걔를 유지하며 계층적으로 생성 
## 프로세스 생성 과정 및 자원 할당 
프로세스 생성 과정 
1. 새 프로세스에 프로세스 식별자  PID 할당 
2. 프로세스의 모든 구성 요소를 포함할 수 있는 주소 공간과 pcb 할당 
3. pcb 초기화 
4. pcb를 큐에 할당 
## 자식 프로세스의 실행 형태 
새 프로세스의 실행 시 
- 부모 프로세스와 자식 프로세스는 동시에 실행 
- 부모 프로세스는 자식 프로세스들이 모두 종료될 때 까지 대기 
자식 프로세스의 주소 공간 
- 방법 1 
	- 부모 프로세스의 주소 공간을 복사하여 사용 
	- fork()
- 방법 2 
	- 자신만의 별도의 프로그램을 적재하여 사용 
	- exec()
## 프로세스 종료
프로세스는 마지막 문장을 실행하고 os에게 자신의 삭제를 요쳥하며 종료 
- exit()
- 부모에게 상태값 반환 가능 
- 프로세스에 할당된 모든 자원 반납 
부모 프로세스는 자식을 강제 종료 가능 
- abort()
- 자식 프로세스가 자원을 초과해서 사용할 때 
- 자식 프로세스에 할당된 작업이 더 이상 필요 없을 때 
- 부모 프로세스의 종료 후 자식의 수행을 불허할 때 
## 프로세스 제거
종료된 프로세스의 정보를 없음 
- 할당된 자원 시스템에 반환 
- pcb 회수, 프로세스 테이블에서 제거 
# 05. 스레드 
## 프로세스 vs 스레드 
프로세스 
- os에서 실행되는 하나의 프로그램 
- 각 프로세스는 고유한 code, data, stack 영역을 가짐 
- multip prcessing / multi tasking 
	- 한 시스템에서 한 번에 하나 이상의 프로그램을 수행 
스레드 
- 프로세서 내에서 실행되는 세부 작업 단위 
- 같은 프로세스의 다른 스레드와 code, data 영역 공유
	- stack 영역은 별도로 구성 
- multi trheading 
	- 하나의 프로세스는 하나 이상의 스레드로 구성 
## 프로세스의 종류 
단일 스레드 프로세스 
- 한 프로그램에서 한 번에 한 작업만 수행 가능 
다중 스레드 프로세스 
- 한 프로그램에서 한 번에 여러 작업 동시 수행 가능 
멀티 스레딩 환경에서의 프로세스는 하나 이상의 스레드를 가짐 
## 스레드 사용 이점 
사용자 응답성 증가 
- 긴 작업 수행시에도 사용자 응답성을 높일 수 있음 
자원 공유
- 한 프로세스에 속한 다수의 작업 스레드들이 자원과 메모리를 공유하며 처리 
경제성 
- 프로세스를 생성/문맥 교환하는 것 보다 더 빠름 
다중 프로세서 구조 활용 가능 
각 스레드가 서로 다른 프로세서에서 병렬적으로 처리 가능 
## 스레드의 구현 방법 
사용자 스레드 
- 커널 도움 없이 사용자 주소 공강에 구현 
커널 스레드 
os 커널에 의해 스레드를 관리 
